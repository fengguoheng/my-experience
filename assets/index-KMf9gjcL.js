import{u as E,L as J}from"./useLoading-DVywwT7Q.js";import{B as R}from"./BgBoard-CCi1cn6F.js";import{r as k}from"./request-C9QAWmFR.js";import{_ as T,r as c,o as L,j as _,g as n,m as M,f as e,F as U,l as H,w as a,L as K,b as u,c as p,t as V,h as S,e as P,p as G,i as Q,K as A}from"./index-D-R_tuRR.js";const v="/link",W=i=>k({url:v+"/applylink",method:"post",data:i}),X=i=>k({url:v+"/queryapply",params:{linkAddress:i}}),Y=()=>k({url:v+"/linklist"}),Z=i=>k({url:v+"/updateLink",method:"put",data:i}),x=i=>(G("data-v-568f7f9b"),i=i(),Q(),i),ee={class:"friend"},le={class:"jsxx"},se=x(()=>e("div",{class:"js-box1"},[e("i",{class:"iconfont icon-xinxi",style:{"font-size":"22px",color:"#9fbbe7"}}," 本站信息"),e("p",null,"网站名称: Hao's Blog"),e("p",null,"网站地址: http://blog.haoyuming.top"),e("p",null,"网站描述: 这是一个用来记录知识和生活的博客")],-1)),oe={class:"js-box2"},te=x(()=>e("div",{class:"sj"},[e("i",{class:"iconfont icon-shenqing",style:{"font-size":"22px",color:"#9fbbe7"}}," 申请方式"),e("p",null,"点击右方按钮"),e("p",null,"不会添加带有广告营销和没有实质性内容的友链"),e("p",null,"申请之前请将本网站添加为您的友链哦")],-1)),ne={class:"an"},ae={class:"zs"},ie={class:"box1"},re=["src"],de=["src"],ue=["onClick"],ce=["onClick"],pe={class:"t"},me={class:"xg"},ge=x(()=>e("span",{style:{color:"#97bbe7","font-weight":"bold"}},"友链绘卷展开",-1)),fe=["src"],_e=x(()=>e("span",{style:{color:"#8597b4"}},"+",-1)),ke={class:"dialog-footer"},ve={__name:"index",setup(i){const{isLoading:C}=E(),b=c([]),F=async()=>{const t=await Y();console.log(t),b.value=t.data};L(()=>{window.scrollTo(0,0),F()});const I=t=>{window.open(t)},m=c(),d=c(!1),y=t=>{if(t){m.value=t,d.value=!0;const s=b.value.find(r=>r.id===m.value);l.value.name=s.name,l.value.description=s.description,l.value.linkAddress=s.linkAddress,l.value.linkUrl=s.linkUrl,l.value.id=t}else d.value=!0},l=c({name:"",description:"",linkAddress:"",linkUrl:"",identification:""}),h=c(null),q={name:[{required:!0,message:"请输入名称",trigger:"blur"},{pattern:"^\\S{1,12}$",message:"网站不能超过12个字符",trigger:"blur"}],description:[{required:!0,message:"请输入内容",trigger:"blur"},{pattern:"^\\S{1,16}$",message:"描述不能超过16个字符",trigger:"blur"}],linkAddress:[{required:!0,message:"请输入地址",trigger:"blur"}],identification:[{required:!0,message:"请输入标识",trigger:"blur"}]},w=()=>{h.value.resetFields(),d.value=!1,l.value={name:"",description:"",linkAddress:"",linkUrl:""},m.value=""},B=t=>{l.value.linkUrl=t.data},z=()=>{h.value.validate(async t=>{if(t)if(m.value)console.log("修改"),await Z(l.value),window.localStorage.setItem("linkUser",JSON.stringify(l.value)),A.success("12小时内审核完成期待你的友链"),d.value=!1;else{const s=await W(l.value);window.localStorage.setItem("linkUser",JSON.stringify(l.value)),A.success(s.data),d.value=!1}})},N=async()=>{const t=window.localStorage.getItem("linkUser");if(!t)return;const s=JSON.parse(t),r=await X(s.linkAddress);K({title:"审核详情",message:r.data.message,type:r.data.status===2?"success":"error"})};return L(()=>{window.localStorage.getItem("linkUser")&&N()}),(t,s)=>{const r=u("el-button"),j=u("el-upload"),g=u("el-input"),f=u("el-form-item"),$=u("el-form"),O=u("el-dialog");return p(),_(U,null,[n(J,{"is-loading":M(C)},null,8,["is-loading"]),n(R,{title:"友链",wengan:"在这里，每条一友链，都是灵感跃动的桥梁"}),e("div",ee,[e("div",le,[se,e("div",oe,[te,e("div",ne,[e("button",{type:"button",class:"btn",onClick:s[0]||(s[0]=o=>y(null))},"友链申请")])])])]),e("div",ae,[(p(!0),_(U,null,H(b.value,o=>(p(),_("div",{class:"zs-box",key:o},[e("div",ie,[e("img",{src:o.linkUrl,class:"bgn",alt:""},null,8,re),e("img",{src:o.linkUrl,alt:"",class:"img-box"},null,8,de),e("i",{class:"iconfont icon-xiugai",onClick:D=>y(o.id)},null,8,ue)]),e("div",{class:"box2",onClick:D=>I(o.linkAddress)},[e("h2",pe,V(o.name),1),e("h2",me,V(o.description),1)],8,ce)]))),128))]),n(O,{center:"",style:{"background-color":"#434345","border-radius":"10px"},width:"600px",modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=o=>d.value=o),onClose:w},{title:a(()=>[ge]),footer:a(()=>[e("div",ke,[n(r,{size:"small",onClick:w},{default:a(()=>[S("取 消")]),_:1}),n(r,{size:"small",type:"primary",onClick:z,loading:t.confirmLoading},{default:a(()=>[S("确 定")]),_:1},8,["loading"])])]),default:a(()=>[n(j,{style:{"margin-left":"227px",height:"80px",width:"80px","border-radius":"4px",border:"1px solid #409eff"},"on-success":B,action:"/prod-api/web/link/fileUpload","show-file-list":"false"},{default:a(()=>[l.value.linkUrl?(p(),_("img",{key:0,src:l.value.linkUrl,class:"avatar"},null,8,fe)):(p(),P(r,{key:1,style:{"background-color":"#434345",border:"none",margin:"34px 0px 0px 23px","font-size":"13px",width:"15px",height:"15px"}},{default:a(()=>[_e]),_:1}))]),_:1}),n($,{ref_key:"linkFormRef",ref:h,model:l.value,rules:q,"label-width":"80px"},{default:a(()=>[n(f,{class:"lyinput",label:"网站名称",prop:"name",style:{margin:"20px 0 0 65px"}},{default:a(()=>[n(g,{placeholder:"请填写网站名称",maxLength:20,modelValue:l.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.name=o),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),n(f,{class:"lyinput",label:"网站描述",prop:"description",style:{margin:"20px 0 0 65px"}},{default:a(()=>[n(g,{placeholder:"请填写网站描述",maxLength:20,modelValue:l.value.description,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.description=o),style:{width:"240px","background-color":"#434345"}},null,8,["modelValue"])]),_:1}),n(f,{class:"lyinput",label:"网站地址",prop:"linkAddress",style:{margin:"20px 0 0 65px"}},{default:a(()=>[n(g,{placeholder:"请填写网站地址",maxLength:20,modelValue:l.value.linkAddress,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.linkAddress=o),style:{width:"240px","background-color":"#434345"}},null,8,["modelValue"])]),_:1}),n(f,{class:"lyinput",label:"网站标识",prop:"identification",style:{margin:"20px 0 0 65px"}},{default:a(()=>[n(g,{placeholder:"请填写网站标识",type:"password",maxLength:20,modelValue:l.value.identification,"onUpdate:modelValue":s[4]||(s[4]=o=>l.value.identification=o),style:{width:"240px","background-color":"#434345"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}},we=T(ve,[["__scopeId","data-v-568f7f9b"]]);export{we as default};
